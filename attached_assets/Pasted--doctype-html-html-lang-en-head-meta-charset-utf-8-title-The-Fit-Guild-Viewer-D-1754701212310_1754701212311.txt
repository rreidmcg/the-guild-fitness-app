<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>The Fit Guild – Viewer Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, sans-serif; padding: 20px; background: #0b0b0b; color: #f2f2f2; }
    h1 { color: #e63946; }
    section { margin-bottom: 2rem; }
    .card { background: #151515; padding: 1rem; border-radius: 8px; }
    ul { list-style: none; padding: 0; }
    li { margin-bottom: 0.5rem; }
    strong { color: #fff; }
    .muted { color:#b2b2b2; font-size:.9rem }
  </style>
</head>
<body>
<h1>📜 The Fit Guild – Read-Only Demo</h1>

<section>
  <h2>👤 Account</h2>
  <div class="card" id="acct"></div>
</section>

<section>
  <h2>💪 Last Workouts</h2>
  <div class="card"><ul id="wos"></ul></div>
</section>

<section>
  <h2>🗡 Dungeon Progress</h2>
  <div class="card" id="dng"></div>
</section>

<section>
  <h2>🏆 Leaderboard (Top 5)</h2>
  <div class="card"><ol id="lb"></ol></div>
</section>

<section>
  <h2>🛒 Shop</h2>
  <div class="card"><ul id="shop"></ul></div>
</section>

<p class="muted">Viewer mode: static demo data – no actions can be taken.</p>

<script>
(async () => {
  try {
    const data = await fetch('/viewer.json', { cache:'no-store' }).then(r=>r.json());

    document.getElementById('acct').innerHTML =
      `<p><strong>Username:</strong> ${data.account.username}</p>
       <p><strong>Level:</strong> ${data.account.level}</p>
       <p><strong>XP:</strong> ${data.account.xp} / ${data.account.xpToNext}</p>
       <p><strong>Streak:</strong> ${data.account.streak} days ${data.account.streak>=3?'(🔥 1.5× bonus active)':''}</p>`;

    document.getElementById('wos').innerHTML =
      data.workouts.map(w => `<li>${w.name} – ${w.minutes} min – +${w.xp} XP</li>`).join('');

    document.getElementById('dng').innerHTML =
      `<p><strong>Current dungeon:</strong> ${data.dungeon.name} – Floor ${data.dungeon.floor}/${data.dungeon.floors}</p>
       <p><strong>Boss titles earned:</strong> ${data.dungeon.titles.join(', ') || '—'}</p>
       <p><strong>Potions:</strong> ${data.dungeon.potions.join(', ') || '—'}</p>`;

    document.getElementById('lb').innerHTML =
      data.leaderboard.map(p => `<li>${p.name} – ${p.xp} XP</li>`).join('');

    document.getElementById('shop').innerHTML =
      data.shop.map(i => `<li>${i.name} – ${i.status || (i.price + ' gold')}</li>`).join('');

  } catch (e) {
    document.body.insertAdjacentHTML('beforeend', `<pre>${String(e)}</pre>`);
  }
})();
</script>
</body>
</html>